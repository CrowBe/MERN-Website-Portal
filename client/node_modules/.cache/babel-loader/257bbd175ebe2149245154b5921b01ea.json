{"ast":null,"code":"import _regeneratorRuntime from\"/mnt/c/Users/Valued Customer/projects/businessTracker/frontend-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/mnt/c/Users/Valued Customer/projects/businessTracker/frontend-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useAuth0}from\"../../react-auth0-spa\";var ExternalApi=function ExternalApi(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showResult=_useState2[0],setShowResult=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),apiMessage=_useState4[0],setApiMessage=_useState4[1];var _useAuth=useAuth0(),getTokenSilently=_useAuth.getTokenSilently;var callApi=function callApi(){var token,response,responseData;return _regeneratorRuntime.async(function callApi$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(getTokenSilently({audience:process.env.REACT_APP_AUTH_AUDIENCE,scope:process.env.REACT_APP_AUTH_ADMIN,redirect_uri:'http://localhost:3000/'}));case 3:token=_context.sent;console.log(token);_context.next=7;return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/api/external\",{headers:{Authorization:\"Bearer \".concat(token)}}));case 7:response=_context.sent;console.log(response);_context.next=11;return _regeneratorRuntime.awrap(response.json());case 11:responseData=_context.sent;setShowResult(true);setApiMessage(responseData);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 19:case\"end\":return _context.stop();}}},null,null,[[0,16]]);};return React.createElement(React.Fragment,null,React.createElement(\"h1\",null,\"External API\"),React.createElement(\"button\",{onClick:callApi},\"Ping API\"),showResult&&React.createElement(\"code\",null,JSON.stringify(apiMessage,null,2)));};export default ExternalApi;","map":{"version":3,"sources":["/mnt/c/Users/Valued Customer/projects/businessTracker/frontend-tracker-app/src/components/pages/ExternalApi.js"],"names":["React","useState","useAuth0","ExternalApi","showResult","setShowResult","apiMessage","setApiMessage","getTokenSilently","callApi","audience","process","env","REACT_APP_AUTH_AUDIENCE","scope","REACT_APP_AUTH_ADMIN","redirect_uri","token","console","log","fetch","headers","Authorization","response","json","responseData","error","JSON","stringify"],"mappings":"yXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,uBAAzB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,eACYF,QAAQ,CAAC,KAAD,CADpB,wCACjBG,UADiB,eACLC,aADK,8BAEYJ,QAAQ,CAAC,EAAD,CAFpB,yCAEjBK,UAFiB,eAELC,aAFK,4BAGKL,QAAQ,EAHb,CAGhBM,gBAHgB,UAGhBA,gBAHgB,CAKxB,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,qNAEQD,gBAAgB,CAAC,CACjCE,QAAQ,CAAEC,OAAO,CAACC,GAAR,CAAYC,uBADW,CAEjCC,KAAK,CAAEH,OAAO,CAACC,GAAR,CAAYG,oBAFc,CAGjCC,YAAY,CAAE,wBAHmB,CAAD,CAFxB,SAENC,KAFM,eAOZC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAPY,iDASWG,KAAK,CAAC,oCAAD,CAAuC,CACjEC,OAAO,CAAE,CACPC,aAAa,kBAAYL,KAAZ,CADN,CADwD,CAAvC,CAThB,SASNM,QATM,eAcZL,OAAO,CAACC,GAAR,CAAYI,QAAZ,EAdY,kDAeeA,QAAQ,CAACC,IAAT,EAff,UAeNC,YAfM,eAiBZpB,aAAa,CAAC,IAAD,CAAb,CACAE,aAAa,CAACkB,YAAD,CAAb,CAlBY,iFAoBZP,OAAO,CAACQ,KAAR,cApBY,kEAAhB,CAwBA,MACE,yCACE,6CADF,CAEE,8BAAQ,OAAO,CAAEjB,OAAjB,aAFF,CAGGL,UAAU,EAAI,gCAAOuB,IAAI,CAACC,SAAL,CAAetB,UAAf,CAA2B,IAA3B,CAAiC,CAAjC,CAAP,CAHjB,CADF,CAOD,CApCD,CAsCA,cAAeH,CAAAA,WAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useAuth0 } from \"../../react-auth0-spa\";\n\nconst ExternalApi = () => {\n  const [showResult, setShowResult] = useState(false);\n  const [apiMessage, setApiMessage] = useState(\"\");\n  const { getTokenSilently } = useAuth0();\n\n  const callApi = async () => {\n    try {\n      const token = await getTokenSilently({\n          audience: process.env.REACT_APP_AUTH_AUDIENCE,\n          scope: process.env.REACT_APP_AUTH_ADMIN,\n          redirect_uri: 'http://localhost:3000/'\n        });\n      console.log(token);\n\n      const response = await fetch(\"http://localhost:3001/api/external\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(response);\n      const responseData = await response.json();\n\n      setShowResult(true);\n      setApiMessage(responseData);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <>\n      <h1>External API</h1>\n      <button onClick={callApi}>Ping API</button>\n      {showResult && <code>{JSON.stringify(apiMessage, null, 2)}</code>}\n    </>\n  );\n};\n\nexport default ExternalApi;"]},"metadata":{},"sourceType":"module"}