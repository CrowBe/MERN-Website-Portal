{"ast":null,"code":"import _slicedToArray from \"/mnt/c/Users/Valued Customer/projects/businessTracker/frontend-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/mnt/c/Users/Valued Customer/projects/businessTracker/frontend-tracker-app/src/components/ExternalApi.js\";\nimport React, { useState } from \"react\";\nimport { useAuth0 } from \"../react-auth0-spa\";\n\nconst ExternalApi = () => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showResult = _useState2[0],\n        setShowResult = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        apiMessage = _useState4[0],\n        setApiMessage = _useState4[1];\n\n  const _useAuth = useAuth0(),\n        getTokenSilently = _useAuth.getTokenSilently;\n\n  const apiOptions = {\n    scope: 'admin:all'\n  };\n\n  const callApi = async () => {\n    try {\n      const token = await getTokenSilently(apiOptions);\n      console.log(token);\n      const response = await fetch(\"/api/external\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const responseData = await response.json();\n      setShowResult(true);\n      setApiMessage(responseData);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const callScopedApi = async () => {\n    try {\n      const token = await getTokenSilently(apiOptions);\n      console.log(token);\n      const response = await fetch(\"http://localhost:3001/api/external-scoped\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const responseData = await response.json();\n      setShowResult(true);\n      setApiMessage(responseData);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"External API\"), React.createElement(\"button\", {\n    onClick: callApi,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Ping API\"), React.createElement(\"button\", {\n    onClick: callScopedApi,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Ping Scoped API\"), showResult && React.createElement(\"code\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, JSON.stringify(apiMessage, null, 2)));\n};\n\nexport default ExternalApi;","map":{"version":3,"sources":["/mnt/c/Users/Valued Customer/projects/businessTracker/frontend-tracker-app/src/components/ExternalApi.js"],"names":["React","useState","useAuth0","ExternalApi","showResult","setShowResult","apiMessage","setApiMessage","getTokenSilently","apiOptions","scope","callApi","token","console","log","response","fetch","headers","Authorization","responseData","json","error","callScopedApi","JSON","stringify"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,oBAAzB;;AAEA,MAAMC,WAAW,GAAG,MAAM;AAAA,oBACYF,QAAQ,CAAC,KAAD,CADpB;AAAA;AAAA,QACjBG,UADiB;AAAA,QACLC,aADK;;AAAA,qBAEYJ,QAAQ,CAAC,EAAD,CAFpB;AAAA;AAAA,QAEjBK,UAFiB;AAAA,QAELC,aAFK;;AAAA,mBAGKL,QAAQ,EAHb;AAAA,QAGhBM,gBAHgB,YAGhBA,gBAHgB;;AAIxB,QAAMC,UAAU,GAAG;AACjBC,IAAAA,KAAK,EAAE;AADU,GAAnB;;AAIA,QAAMC,OAAO,GAAG,YAAY;AAC1B,QAAI;AACF,YAAMC,KAAK,GAAG,MAAMJ,gBAAgB,CAACC,UAAD,CAApC;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,YAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,eAAD,EAAkB;AAC5CC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASN,KAAM;AADxB;AADmC,OAAlB,CAA5B;AAMA,YAAMO,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAA3B;AAEAf,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,MAAAA,aAAa,CAACY,YAAD,CAAb;AACD,KAdD,CAcE,OAAOE,KAAP,EAAc;AACdR,MAAAA,OAAO,CAACQ,KAAR,CAAcA,KAAd;AACD;AACF,GAlBD;;AAoBA,QAAMC,aAAa,GAAG,YAAY;AAChC,QAAI;AACF,YAAMV,KAAK,GAAG,MAAMJ,gBAAgB,CAACC,UAAD,CAApC;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,YAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAAD,EAA8C;AACxEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASN,KAAM;AADxB;AAD+D,OAA9C,CAA5B;AAMA,YAAMO,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAA3B;AAEAf,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,MAAAA,aAAa,CAACY,YAAD,CAAb;AACD,KAdD,CAcE,OAAOE,KAAP,EAAc;AACdR,MAAAA,OAAO,CAACQ,KAAR,CAAcA,KAAd;AACD;AACF,GAlBD;;AAoBA,SACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AAAQ,IAAA,OAAO,EAAEV,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGE;AAAQ,IAAA,OAAO,EAAEW,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAHF,EAIGlB,UAAU,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOmB,IAAI,CAACC,SAAL,CAAelB,UAAf,EAA2B,IAA3B,EAAiC,CAAjC,CAAP,CAJjB,CADF;AAQD,CAxDD;;AA0DA,eAAeH,WAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useAuth0 } from \"../react-auth0-spa\";\n\nconst ExternalApi = () => {\n  const [showResult, setShowResult] = useState(false);\n  const [apiMessage, setApiMessage] = useState(\"\");\n  const { getTokenSilently } = useAuth0();\n  const apiOptions = {\n    scope: 'admin:all',\n  };\n\n  const callApi = async () => {\n    try {\n      const token = await getTokenSilently(apiOptions);\n      console.log(token);\n\n      const response = await fetch(\"/api/external\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      const responseData = await response.json();\n\n      setShowResult(true);\n      setApiMessage(responseData);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const callScopedApi = async () => {\n    try {\n      const token = await getTokenSilently(apiOptions);\n      console.log(token);\n\n      const response = await fetch(\"http://localhost:3001/api/external-scoped\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      const responseData = await response.json();\n\n      setShowResult(true);\n      setApiMessage(responseData);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <>\n      <h1>External API</h1>\n      <button onClick={callApi}>Ping API</button>\n      <button onClick={callScopedApi}>Ping Scoped API</button>\n      {showResult && <code>{JSON.stringify(apiMessage, null, 2)}</code>}\n    </>\n  );\n};\n\nexport default ExternalApi;"]},"metadata":{},"sourceType":"module"}